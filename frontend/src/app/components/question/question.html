<div class="question-container">
  <div class="question-card">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p>Loading question...</p>
    </div>
    
    <!-- Error State -->
    <div *ngIf="error" class="error-state">
      <h2>Oops! Something went wrong</h2>
      <p>{{ error }}</p>
      <button class="retry-btn" (click)="ngOnInit()">
        Try Again
      </button>
    </div>
    
    <!-- Question Content -->
    <div *ngIf="!loading && !error && currentQuestion" class="question-content">
      <div class="question-header">
        <span class="question-number">Question {{ currentQuestion.order }}</span>
        <h2>{{ currentQuestion.text }}</h2>
      </div>
      
      <div class="options-container">
        <div 
          *ngFor="let option of currentQuestion.options" 
          class="option"
          [class.selected]="isOptionSelected(option)"
          (click)="selectOption(option)">
          <div class="option-radio">
            <div class="radio-inner" [class.checked]="isOptionSelected(option)"></div>
          </div>
          <span class="option-text">{{ option }}</span>
        </div>
      </div>
      
      <div class="action-buttons">
        <button 
          class="submit-btn" 
          [disabled]="!selectedOption || submitting"
          [class.disabled]="!selectedOption || submitting"
          (click)="submitAnswer()">
          {{ submitting ? 'Submitting...' : 'Continue' }}
        </button>
      </div>
    </div>
    
    <!-- Session Info -->
    <div class="session-info" *ngIf="uniqueLink">
      <small>Reference: {{ uniqueLink }}</small>
    </div>
  </div>

  <!-- Popup Modal -->
  <div class="popup-overlay" *ngIf="showPopup" (click)="closePopup()">
    <div class="popup-modal" (click)="$event.stopPropagation()">
      <div class="popup-header">
        <h3>Notice</h3>
        <button class="popup-close" (click)="closePopup()">Ã—</button>
      </div>
      <div class="popup-content">
        <p>{{ popupMessage }}</p>
      </div>
      <div class="popup-actions">
        <button class="popup-btn" (click)="closePopup()">OK</button>
      </div>
    </div>
  </div>
</div>
